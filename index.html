<!DOCTYPE html>
<html lang="vi" data-theme="light">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title id="appTitle">[SPX] DAILY CHECKLIST</title>
  <link rel="icon" id="appFavicon" type="image/png" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“‹</text></svg>" />
  <meta name="theme-color" content="#ff6a00" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
  <meta name="apple-mobile-web-app-title" content="SPX Checklist" />
  <meta name="description" content="Daily Checklist Management System" />
  
  <!-- PWA Manifest -->
  <link rel="manifest" id="pwaManifest" />
  
  <!-- ============================================
       [SPX] DAILY CHECKLIST - APP CONFIGURATION
       ============================================
       TÃ™Y CHá»ˆNH LOGO & BRANDING Táº I ÄÃ‚Y:
       
       HÆ¯á»šNG DáºªN:
       1. TÃ¬m áº£nh logo báº¡n muá»‘n (PNG, SVG, JPG)
       2. Upload lÃªn Google Drive hoáº·c Imgur Ä‘á»ƒ láº¥y link
       3. Paste link vÃ o logoUrl vÃ  faviconUrl bÃªn dÆ°á»›i
       4. LÆ°u file vÃ  refresh trang Ä‘á»ƒ tháº¥y thay Ä‘á»•i
       
       GOOGLE DRIVE: https://drive.google.com/file/d/FILE_ID/view
       Äá»•i thÃ nh: https://drive.google.com/uc?export=view&id=FILE_ID
       
       IMGUR: Upload táº¡i imgur.com, click chuá»™t pháº£i â†’ Copy image address
  ============================================ -->
  <script>
    const APP_CONFIG = {
      // ===== TÃŠN APP & PHIÃŠN Báº¢N =====
      appTitle: '[SPX] DAILY CHECKLIST',
      appVersion: 'v2.5',
      
      // ===== LOGO & FAVICON =====
      // ğŸ”½ PASTE LINK áº¢NH LOGO Cá»¦A Báº N VÃ€O ÄÃ‚Y ğŸ”½
      logoUrl: 'https://images.seeklogo.com/logo-png/49/1/spx-express-indonesia-logo-png_seeklogo-499970.png',
      faviconUrl: 'https://images.seeklogo.com/logo-png/49/1/spx-express-indonesia-logo-png_seeklogo-499970.png',
      
      // ===== THÃ”NG TIN CÃ”NG TY =====
      companyName: 'SPX Express TVH',
      copyrightYear: '2025',
      footerText: 'Daily Checklist Management System with Security'
    };
  </script>
  
  <?!= include('styles'); ?>
  
</head>
  <body>
    <!-- Skip link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>
  <div class="aurora"></div>

  <!-- AUTH CHECK OVERLAY -->
  <div id="authOverlay" style="position:fixed;inset:0;background:rgba(0,0,0,0.95);z-index:9999;display:grid;place-items:center;">
    <div class="glass" style="padding:40px;text-align:center;max-width:500px;">
      <h2 style="margin:0 0 16px">ğŸ”’ Checking Authentication...</h2>
      <p>Please wait while we verify your access.</p>
      <div class="skeleton" style="height:40px;margin-top:20px"></div>
    </div>
  </div>

  <!-- TOPBAR (áº©n ban Ä‘áº§u, hiá»‡n sau khi auth) -->
  <div id="topbar" class="topbar glass" style="display:none">
    <div class="brand">
      <img id="topbarLogo" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“‹</text></svg>" alt="Logo" style="height:40px;width:auto;object-fit:contain;border-radius:6px" />
      <h1 id="topbarTitle">[SPX] DAILY CHECKLIST</h1>
    </div>
    <div style="display:flex;gap:8px;align-items:center;flex:1;justify-content:center;max-width:600px;margin:0 auto">
      <!-- Global Search -->
      <div id="globalSearchContainer" style="position:relative;flex:1;max-width:400px">
        <input id="globalSearch" type="text" placeholder="ğŸ” TÃ¬m kiáº¿m toÃ n bá»™..." 
          style="width:100%;padding:8px 16px;border-radius:20px;border:1px solid var(--stroke);background:var(--glass);color:var(--ink);font-size:14px;outline:none;transition:all 0.2s" />
        <div id="globalSearchResults" class="glass" style="position:absolute;top:100%;left:0;right:0;margin-top:8px;max-height:400px;overflow-y:auto;display:none;z-index:1000;border-radius:12px;padding:8px;box-shadow:0 8px 24px rgba(0,0,0,0.2)"></div>
      </div>
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      <button id="backCover" class="pill pill-button" title="Quay vá»">â†© <span id="i18n-back">Trang bÃ¬a</span></button>
      <div id="gradientThemeSelector" style="position:relative;display:inline-block">
        <button id="gradientThemeBtn" class="pill pill-button" title="Chá»n mÃ u gradient">ğŸ¨</button>
        <div id="gradientThemeMenu" class="glass" style="position:absolute;top:100%;right:0;margin-top:8px;padding:12px;border-radius:12px;min-width:200px;display:none;z-index:1000;box-shadow:0 8px 24px rgba(0,0,0,0.2)">
          <div style="font-size:12px;color:var(--muted);margin-bottom:8px;font-weight:600">Gradient Themes 2025</div>
          <button class="gradient-option" data-gradient="sunset" style="width:100%;padding:10px;margin-bottom:6px;border-radius:8px;border:none;background:linear-gradient(135deg, #ff6a00, #ffb366);color:#1a0d00;font-weight:600;cursor:pointer;text-align:left">ğŸŒ… Sunset Orange</button>
          <button class="gradient-option" data-gradient="ocean" style="width:100%;padding:10px;margin-bottom:6px;border-radius:8px;border:none;background:linear-gradient(135deg, #0066cc, #66b3ff);color:#001a33;font-weight:600;cursor:pointer;text-align:left">ğŸŒŠ Ocean Blue</button>
          <button class="gradient-option" data-gradient="forest" style="width:100%;padding:10px;margin-bottom:6px;border-radius:8px;border:none;background:linear-gradient(135deg, #0d4f3c, #66d4a8);color:#001a0f;font-weight:600;cursor:pointer;text-align:left">ğŸŒ² Forest Green</button>
          <button class="gradient-option" data-gradient="purple" style="width:100%;padding:10px;margin-bottom:6px;border-radius:8px;border:none;background:linear-gradient(135deg, #6b2c91, #c084fc);color:#1a0d26;font-weight:600;cursor:pointer;text-align:left">ğŸ’œ Purple Dream</button>
          <button class="gradient-option" data-gradient="" style="width:100%;padding:10px;margin-top:8px;border-radius:8px;border:1px solid var(--stroke);background:var(--glass);color:var(--ink);font-weight:600;cursor:pointer;text-align:left">âšª Táº¯t Gradient</button>
        </div>
      </div>
      <button id="themeToggle" class="pill pill-button" title="Dark/Light">ğŸŒ“</button>
      <button id="langToggle2" class="pill pill-button" title="VI / EN">VI/EN</button>
      <div id="userChip" class="userchip" title=""></div>
    </div>
  </div>

  <!-- COVER PAGE -->
  <section id="cover" class="cover-page">
    <div class="cover-card fade-enter">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
        <div style="display:flex;gap:8px;align-items:center">
          <img id="coverLogo" src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ“‹</text></svg>" alt="Logo" style="height:48px;width:auto;object-fit:contain;border-radius:8px" />
          <strong id="coverTitle">[SPX] DAILY CHECKLIST v2.5 </strong>
        </div>
        <div style="display:flex;gap:6px;align-items:center">
          <div id="coverGradientThemeSelector" style="position:relative;display:inline-block">
            <button id="coverGradientThemeBtn" class="pill pill-button" title="Chá»n mÃ u gradient">ğŸ¨</button>
            <div id="coverGradientThemeMenu" class="glass" style="position:absolute;top:100%;right:0;margin-top:8px;padding:12px;border-radius:12px;min-width:200px;display:none;z-index:1000;box-shadow:0 8px 24px rgba(0,0,0,0.2)">
              <div style="font-size:12px;color:var(--muted);margin-bottom:8px;font-weight:600">Gradient Themes 2025</div>
              <button class="gradient-option" data-gradient="sunset" style="width:100%;padding:10px;margin-bottom:6px;border-radius:8px;border:none;background:linear-gradient(135deg, #ff6a00, #ffb366);color:#1a0d00;font-weight:600;cursor:pointer;text-align:left">ğŸŒ… Sunset Orange</button>
              <button class="gradient-option" data-gradient="ocean" style="width:100%;padding:10px;margin-bottom:6px;border-radius:8px;border:none;background:linear-gradient(135deg, #0066cc, #66b3ff);color:#001a33;font-weight:600;cursor:pointer;text-align:left">ğŸŒŠ Ocean Blue</button>
              <button class="gradient-option" data-gradient="forest" style="width:100%;padding:10px;margin-bottom:6px;border-radius:8px;border:none;background:linear-gradient(135deg, #0d4f3c, #66d4a8);color:#001a0f;font-weight:600;cursor:pointer;text-align:left">ğŸŒ² Forest Green</button>
              <button class="gradient-option" data-gradient="purple" style="width:100%;padding:10px;margin-bottom:6px;border-radius:8px;border:none;background:linear-gradient(135deg, #6b2c91, #c084fc);color:#1a0d26;font-weight:600;cursor:pointer;text-align:left">ğŸ’œ Purple Dream</button>
              <button class="gradient-option" data-gradient="" style="width:100%;padding:10px;margin-top:8px;border-radius:8px;border:1px solid var(--stroke);background:var(--glass);color:var(--ink);font-weight:600;cursor:pointer;text-align:left">âšª Táº¯t Gradient</button>
            </div>
          </div>
          <button id="langToggle" class="pill pill-button" title="VI / EN">VI/EN</button>
          <button id="coverTheme" class="pill pill-button" title="Dark/Light">ğŸŒ“</button>
        </div>
      </div>

      <h2 class="cover-title" id="i18n-cover-title">Quáº£n LÃ½ Checklist HÃ ng NgÃ y</h2>
      <div class="cele-banner" id="i18n-2010" style="display:none">ğŸ‰ CHÃ€O Má»ªNG NGÃ€Y 20.10</div>
      <p class="cover-sub" id="i18n-cover-sub">Theo dÃµi tiáº¿n Ä‘á»™ cÃ´ng viá»‡c, quáº£n lÃ½ hub, vÃ  cá»™ng tÃ¡c nhÃ³m theo thá»i gian thá»±c vá»›i phÃ¢n quyá»n báº£o máº­t.</p>

      <div class="features">
        <div class="feat">
          <div class="chip" style="margin-bottom:6px">ğŸ” XÃ¡c Thá»±c</div>
          <div class="t">Google Account ná»™i bá»™ SPX vá»›i phÃ¢n quyá»n theo Hub</div>
        </div>
        <div class="feat">
          <div class="chip" style="margin-bottom:6px">âœ… Quáº£n LÃ½ Task</div>
          <div class="t">Táº¡o, chá»‰nh sá»­a, SLA tracking & phÃª duyá»‡t</div>
        </div>
        <div class="feat">
          <div class="chip" style="margin-bottom:6px">ğŸ“Š Analytics</div>
          <div class="t">BÃ¡o cÃ¡o vÃ  audit log Ä‘áº§y Ä‘á»§</div>
        </div>
      </div>

      <div style="display:flex;gap:10px;justify-content:center;align-items:center;margin-top:8px">
        <button id="enterAppBtn" class="btn btn-primary">ChÃ o Má»«ng Báº¡n ÄÃ£ Quay Láº¡i</button>
        <span class="chip">CHÃNH THá»¨C</span>
      </div>

      <div id="holidayGreeting" style="margin-top:14px;color:var(--primary);font-size:13px;font-weight:600;display:none"></div>

      <div style="margin-top:14px;color:var(--muted);font-size:12px">
        SPX Express TVH Â© 2025 â€” Daily Checklist Management System with Security
      </div>
    </div>
  </section>

  <!-- APP CONTAINER (áº©n ban Ä‘áº§u) -->
  <div class="app" id="main-content" role="main" style="display:none">
    
    <!-- SIDEBAR -->
    <aside class="sidebar glass">
      <div class="subheader">
        <div class="timestamp" id="now">â€”</div>
        <div style="display:flex; gap:8px; align-items:center">
          <div id="onlineBadge" class="pill" title="Xem ngÆ°á»i Ä‘ang online">
            <span class="dot" style="width:8px;height:8px;border-radius:50%;background:var(--green)"></span>
            <span id="i18n-online">Online</span> â€¢ <b id="onlineCount">0</b>
          </div>
        </div>
      </div>

      <!-- HUB SELECTOR -->
      <div class="group glass" id="grpHub">
        <div class="label" id="i18n-hub-label">Äang xem tiáº¿n Ä‘á»™ Hub</div>
        <div class="control"><select id="hub"></select></div>
      </div>

      <!-- DATE SELECTOR -->
      <div class="group glass" id="grpDate">
        <div class="label" id="i18n-date-label">NgÃ y checklist</div>
        <div class="control"><input id="date" type="date" /></div>
      </div>


      <!-- KPI -->
      <div class="group glass" id="grpProgress">
        <div class="label">Tiáº¿n Ä‘á»™ hÃ´m nay</div>
        <div class="kpi">
          <div class="tile">
            <div class="n" id="done">0</div>
            <div class="t">HoÃ n thÃ nh</div>
          </div>
          <div class="tile" id="unfinishedTile" style="cursor:pointer" title="Click Ä‘á»ƒ xem tasks chÆ°a hoÃ n thÃ nh">
            <div class="n" id="todo">0</div>
            <div class="t">ChÆ°a hoÃ n thÃ nh</div>
          </div>
        </div>
      </div>
      
      <!-- Quick Actions -->
      <div class="group glass">
        <button id="showUnfinishedBtn" class="btn btn-soft" style="width:100%">
          ğŸ“Œ Xem Tasks ChÆ°a HoÃ n ThÃ nh
        </button>
      </div>
    </aside>

    <!-- MAIN CONTENT -->
    <main class="main">
      <!-- TABS -->
      <div class="tabs">
        <button class="tab active" data-tab="check">ğŸ“‹ Checklist</button>
        <button class="tab" data-tab="report">ğŸ“Š BÃ¡o CÃ¡o</button>
        <button class="tab" data-tab="unfinished">ğŸ“Œ ChÆ°a HoÃ n ThÃ nh</button>
        <button class="tab" data-tab="admin" id="adminTab" style="display:none">âš™ï¸ Admin</button>
        <button class="tab" data-tab="qa">â“ Q&A</button>
        <button class="tab" data-tab="about">â„¹ï¸ ThÃ´ng Tin</button>
      </div>

      <!-- TAB CONTENT CONTAINER -->
      <div class="work glass" style="flex:1;display:flex;flex-direction:column;min-height:0;overflow:hidden;">
        
        <!-- TAB: CHECKLIST -->
        <div class="content active" data-content="check" id="checkTab">
          <div id="vViewport" style="position:relative;flex:1;overflow:auto;min-height:0">
            <div id="vSpacer" style="position:relative"></div>
            <div id="vRows"></div>
          </div>
          
          <div style="padding:12px;display:flex;gap:8px;justify-content:center;border-top:1px solid var(--stroke);flex-wrap:wrap">
            <button id="bulkSelectBtn" class="btn btn-soft" style="display:none">â˜‘ï¸ Chá»n nhiá»u</button>
            <button id="bulkEditBtn" class="btn btn-soft" style="display:none">âœï¸ Sá»­a hÃ ng loáº¡t</button>
            <button id="bulkDeleteBtn" class="btn btn-soft" style="display:none">ğŸ—‘ï¸ XÃ³a hÃ ng loáº¡t</button>
            <button id="bulkExportBtn" class="btn btn-soft" style="display:none">ğŸ“— Export</button>
            <button id="bulkCancelBtn" class="btn btn-soft" style="display:none">âœ–ï¸ Há»§y</button>
            <button id="addAdHoc" class="btn btn-soft">+ Task tá»©c thÃ¬</button>
            <button id="saveBtn" class="btn btn-primary">ğŸ’¾ LÆ°u</button>
          </div>
        </div>

        <!-- TAB: BÃO CÃO -->
        <div class="content" data-content="report" style="padding:20px">
          <h2>ğŸ“Š BÃ¡o CÃ¡o Tá»•ng Há»£p</h2>
          
          <!-- Compact Filter Bar - All in One Line -->
          <div class="glass" style="padding:16px;border-radius:12px;margin-bottom:20px">
            <div style="display:flex;align-items:center;gap:12px;flex-wrap:wrap">
              <!-- Hub Selector -->
              <div style="flex:0 0 auto;min-width:200px">
                <select id="reportHub" class="control" style="margin:0;width:100%">
                  <option value="ALL">ğŸŒ Táº¥t cáº£ Hubs</option>
                </select>
              </div>
              
              <!-- Time Range Buttons -->
              <div style="display:flex;gap:6px;flex:0 0 auto" id="reportRange">
                <button class="btn btn-soft" data-r="today" style="padding:8px 12px;font-size:13px">HÃ´m nay</button>
                <button class="btn btn-soft" data-r="week" style="padding:8px 12px;font-size:13px">Tuáº§n nÃ y</button>
                <button class="btn btn-soft active" data-r="month" style="padding:8px 12px;font-size:13px">ThÃ¡ng nÃ y</button>
                <button class="btn btn-soft" data-r="custom" style="padding:8px 12px;font-size:13px">TÃ¹y chá»‰nh</button>
              </div>
              
              <!-- Date Pickers (Default) -->
              <div style="flex:0 0 auto;display:none" id="reportDateDefault">
                <input id="reportDate" type="date" class="control" style="margin:0;padding:8px 12px;font-size:13px" />
              </div>
              
              <!-- Custom Date Range (shown when "TÃ¹y chá»‰nh" is selected) -->
              <div style="flex:0 0 auto;display:none;gap:8px;align-items:center" id="reportDateCustom">
                <label style="font-size:12px;color:var(--muted);white-space:nowrap">Tá»«:</label>
                <input id="reportDateStart" type="date" class="control" style="margin:0;padding:8px 12px;font-size:13px" />
                <label style="font-size:12px;color:var(--muted);white-space:nowrap">Äáº¿n:</label>
                <input id="reportDateEnd" type="date" class="control" style="margin:0;padding:8px 12px;font-size:13px" />
              </div>
              
              <!-- Action Buttons -->
              <div style="display:flex;gap:8px;flex:0 0 auto;margin-left:auto">
                <button id="refreshReport" class="btn btn-primary" style="padding:8px 16px;font-size:13px">ğŸ”„ Táº£i bÃ¡o cÃ¡o</button>
                <button id="exportExcel" class="btn btn-soft" style="padding:8px 12px;font-size:13px">ğŸ“— Excel</button>
                <button id="exportPDF" class="btn btn-soft" style="padding:8px 12px;font-size:13px">ğŸ“• PDF</button>
              </div>
            </div>
          </div>

          <div id="reportContent" class="scrollbox" style="min-height:400px">
            <!-- Empty State (Initial) -->
            <div id="reportEmptyState" class="glass" style="padding:60px 20px;text-align:center;border-radius:16px;margin:20px 0">
              <div style="font-size:64px;margin-bottom:16px">ğŸ“Š</div>
              <h3 style="margin:0 0 8px;font-size:20px;color:var(--ink)">Sáºµn sÃ ng táº¡o bÃ¡o cÃ¡o</h3>
              <p style="margin:0 0 24px;color:var(--muted);font-size:14px">Chá»n Hub vÃ  khoáº£ng thá»i gian, sau Ä‘Ã³ nháº¥n "Táº£i bÃ¡o cÃ¡o" Ä‘á»ƒ xem dá»¯ liá»‡u</p>
              <button id="quickLoadReport" class="btn btn-primary" style="padding:10px 24px">ğŸš€ Táº£i bÃ¡o cÃ¡o nhanh</button>
            </div>
            
            <!-- Loading State -->
            <div id="reportLoadingState" style="display:none;padding:40px;text-align:center">
              <div class="skeleton" style="height:200px;border-radius:12px;margin-bottom:20px"></div>
              <div class="skeleton" style="height:300px;border-radius:12px;margin-bottom:20px"></div>
              <div style="display:grid;grid-template-columns:repeat(4,1fr);gap:16px;margin-bottom:20px">
                <div class="skeleton" style="height:120px;border-radius:12px"></div>
                <div class="skeleton" style="height:120px;border-radius:12px"></div>
                <div class="skeleton" style="height:120px;border-radius:12px"></div>
                <div class="skeleton" style="height:120px;border-radius:12px"></div>
              </div>
            </div>
            
            <!-- Dashboard Charts Container -->
            <div id="reportCharts" style="display:none">
              <!-- KPI Cards -->
              <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px;margin-bottom:20px" id="reportKPICards"></div>
              
              <!-- Charts Grid -->
              <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(400px,1fr));gap:20px;margin-bottom:24px">
                <!-- Task Completion Chart -->
                <div class="glass" style="padding:16px;border-radius:12px;position:relative">
                  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
                    <h3 style="margin:0;font-size:15px;font-weight:600">ğŸ“Š Tá»· Lá»‡ HoÃ n ThÃ nh</h3>
                    <button class="btn-download-chart" data-chart-id="reportCompletionChart" data-chart-name="TyLeHoanThanh" style="padding:6px 12px;font-size:12px;background:rgba(59,130,246,0.1);color:#3b82f6;border:1px solid rgba(59,130,246,0.3);border-radius:6px;cursor:pointer;transition:all 0.2s" title="Táº£i áº£nh xuá»‘ng">ğŸ“¥ Táº£i áº£nh</button>
                  </div>
                  <canvas id="reportCompletionChart" style="max-height:280px"></canvas>
                </div>
                
                <!-- Tasks by Category Chart -->
                <div class="glass" style="padding:16px;border-radius:12px;position:relative">
                  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
                    <h3 style="margin:0;font-size:15px;font-weight:600">ğŸ“‹ Tasks Theo Danh Má»¥c</h3>
                    <button class="btn-download-chart" data-chart-id="reportCategoryChart" data-chart-name="TasksTheoDanhMuc" style="padding:6px 12px;font-size:12px;background:rgba(59,130,246,0.1);color:#3b82f6;border:1px solid rgba(59,130,246,0.3);border-radius:6px;cursor:pointer;transition:all 0.2s" title="Táº£i áº£nh xuá»‘ng">ğŸ“¥ Táº£i áº£nh</button>
                  </div>
                  <canvas id="reportCategoryChart" style="max-height:280px"></canvas>
                </div>
                
                <!-- Daily Progress Chart -->
                <div class="glass" style="padding:16px;border-radius:12px;grid-column:span 2;position:relative">
                  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
                    <h3 style="margin:0;font-size:15px;font-weight:600">ğŸ“ˆ Xu HÆ°á»›ng Tiáº¿n Äá»™ HÃ ng NgÃ y</h3>
                    <button class="btn-download-chart" data-chart-id="reportDailyChart" data-chart-name="XuHuongTienDo" style="padding:6px 12px;font-size:12px;background:rgba(59,130,246,0.1);color:#3b82f6;border:1px solid rgba(59,130,246,0.3);border-radius:6px;cursor:pointer;transition:all 0.2s" title="Táº£i áº£nh xuá»‘ng">ğŸ“¥ Táº£i áº£nh</button>
                  </div>
                  <canvas id="reportDailyChart" style="max-height:280px"></canvas>
                </div>
                
                <!-- Hub Comparison Chart (if multi-hub) -->
                <div class="glass" style="padding:16px;border-radius:12px;grid-column:span 2;display:none;position:relative" id="reportHubChartContainer">
                  <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:12px">
                    <h3 style="margin:0;font-size:15px;font-weight:600">ğŸŒ So SÃ¡nh Giá»¯a CÃ¡c Hub</h3>
                    <button class="btn-download-chart" data-chart-id="reportHubChart" data-chart-name="SoSanhCacHub" style="padding:6px 12px;font-size:12px;background:rgba(59,130,246,0.1);color:#3b82f6;border:1px solid rgba(59,130,246,0.3);border-radius:6px;cursor:pointer;transition:all 0.2s" title="Táº£i áº£nh xuá»‘ng">ğŸ“¥ Táº£i áº£nh</button>
                  </div>
                  <canvas id="reportHubChart" style="max-height:280px"></canvas>
                </div>
              </div>
            </div>
            
            <!-- Data Tables Container -->
            <div id="reportDataContainer"></div>
          </div>
        </div>

        <!-- TAB: ADMIN -->
        <div class="content" data-content="admin" style="padding:20px">
          <h2>âš™ï¸ Admin Panel</h2>
          
          <div class="section glass">
            <h3>ğŸ‘¥ Quáº£n LÃ½ Users</h3>
            <div style="margin:12px 0">
              <button id="addUser" class="btn btn-primary">+ ThÃªm User</button>
              <button id="refreshUsers" class="btn btn-soft">ğŸ”„ Táº£i láº¡i</button>
            </div>
            
            <div class="scrollbox">
              <table class="table" id="usersTable">
                <thead>
                  <tr>
                    <th>Email</th>
                    <th>Hub</th>
                    <th>Role</th>
                    <th>Active</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody id="usersTableBody">
                  <tr><td colspan="5">Loading...</td></tr>
                </tbody>
              </table>
            </div>
          </div>

          <div class="section glass" style="margin-top:20px">
            <h3>ğŸ¢ Quáº£n LÃ½ Hubs</h3>
            <div id="hubsConfig">
              <p class="hint">Hub configuration will be here</p>
            </div>
          </div>
        </div>

        <!-- TAB: UNFINISHED TASKS -->
        <div class="content" data-content="unfinished" style="padding:20px">
          <h2>ğŸ“Œ Tasks ChÆ°a HoÃ n ThÃ nh</h2>
          <div class="glass" style="padding:16px;border-radius:12px;margin-bottom:20px">
            <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap">
              <div style="display:flex;align-items:center;gap:8px">
                <label style="font-size:14px;color:var(--muted);font-weight:500;white-space:nowrap">ğŸ“… Chá»n ngÃ y:</label>
                <input id="unfinishedDate" type="date" class="control" style="padding:8px 12px;font-size:14px;min-width:160px" />
              </div>
              <div style="display:flex;gap:8px;margin-left:auto">
                <button id="unfinishedRefresh" class="btn btn-primary" style="padding:8px 16px;font-size:14px">ğŸ”„ Táº£i láº¡i</button>
                <button id="unfinishedExport" class="btn btn-soft" style="padding:8px 16px;font-size:14px">ğŸ“— Export</button>
              </div>
            </div>
            <div style="margin-top:12px;font-size:13px;color:var(--muted)">
              <span id="unfinishedDateDisplay">Äang hiá»ƒn thá»‹ tasks chÆ°a hoÃ n thÃ nh cá»§a ngÃ y hÃ´m nay (D0)</span>
            </div>
          </div>
          <div id="unfinishedList" class="scrollbox"></div>
        </div>

        <!-- TAB: Q&A MODULE -->
        <div class="content" data-content="qa" style="padding:20px">
          <h2>â“ Há»i & ÄÃ¡p (Q&A)</h2>
          
          <!-- Submit Question Form -->
          <div class="glass" style="padding:20px;border-radius:12px;margin-bottom:20px">
            <h3 style="margin:0 0 16px;font-size:18px;font-weight:600">ğŸ’¬ Äáº·t CÃ¢u Há»i Má»›i</h3>
            <div style="display:grid;grid-template-columns:200px 1fr;gap:12px;margin-bottom:12px;align-items:end">
              <div>
                <label style="display:block;font-size:13px;color:var(--muted);margin-bottom:6px">Danh má»¥c</label>
                <select id="qaCategory" class="control" style="width:100%">
                  <option value="Thao tÃ¡c">ğŸ”§ Thao tÃ¡c</option>
                  <option value="Giao diá»‡n">ğŸ¨ Giao diá»‡n</option>
                  <option value="Ná»™i dung">ğŸ“ Ná»™i dung</option>
                  <option value="KhÃ¡c">â“ KhÃ¡c</option>
                </select>
              </div>
              <div>
                <label style="display:block;font-size:13px;color:var(--muted);margin-bottom:6px">CÃ¢u há»i</label>
                <textarea id="qaQuestion" rows="2" placeholder="Nháº­p cÃ¢u há»i cá»§a báº¡n..." class="control" style="width:100%;resize:vertical"></textarea>
              </div>
            </div>
            <button id="qaSubmit" class="btn btn-primary" style="padding:10px 20px">ğŸ“¤ Gá»­i CÃ¢u Há»i</button>
          </div>

          <!-- Filter & View Questions -->
          <div class="glass" style="padding:20px;border-radius:12px">
            <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:16px">
              <h3 style="margin:0;font-size:18px;font-weight:600">ğŸ“‹ Danh SÃ¡ch CÃ¢u Há»i</h3>
              <button id="qaRefresh" class="btn btn-soft" style="padding:8px 12px">ğŸ”„ Táº£i láº¡i</button>
            </div>
            <div style="display:flex;gap:8px;margin-bottom:16px;flex-wrap:wrap">
              <button class="btn btn-soft active" data-qa-filter="all">ğŸ“‹ Táº¥t cáº£</button>
              <button class="btn btn-soft" data-qa-filter="Thao tÃ¡c">ğŸ”§ Thao tÃ¡c</button>
              <button class="btn btn-soft" data-qa-filter="Giao diá»‡n">ğŸ¨ Giao diá»‡n</button>
              <button class="btn btn-soft" data-qa-filter="Ná»™i dung">ğŸ“ Ná»™i dung</button>
              <button class="btn btn-soft" data-qa-filter="KhÃ¡c">â“ KhÃ¡c</button>
              <button class="btn btn-soft" data-qa-filter="pending" style="margin-left:auto">â³ Chá» tráº£ lá»i</button>
              <button class="btn btn-soft" data-qa-filter="answered">âœ… ÄÃ£ tráº£ lá»i</button>
            </div>
            <div id="qaList" class="scrollbox" style="max-height:500px"></div>
          </div>
        </div>

        <!-- TAB: ABOUT / THÃ”NG TIN -->
        <div class="content" data-content="about" style="padding:20px;overflow:auto">
          <h2 style="text-align:center;margin-bottom:24px">â„¹ï¸ Vá» [SPX] DAILY CHECKLIST</h2>
          
          <div class="section glass" style="margin-bottom:20px">
            <h3>ğŸ“– Giá»›i Thiá»‡u</h3>
            <p><strong>[SPX] DAILY CHECKLIST v2.5 </strong> lÃ  há»‡ thá»‘ng quáº£n lÃ½ cÃ´ng viá»‡c hÃ ng ngÃ y Ä‘Æ°á»£c thiáº¿t káº¿ riÃªng cho <strong>SPX Express TVH</strong>.</p>
            <p>Há»‡ thá»‘ng giÃºp theo dÃµi tiáº¿n Ä‘á»™ cÃ´ng viá»‡c theo tá»«ng Hub, quáº£n lÃ½ SLA (Service Level Agreement), vÃ  theo dÃµi hoáº¡t Ä‘á»™ng cá»§a nhÃ¢n viÃªn má»™t cÃ¡ch chÃ­nh xÃ¡c vÃ  hiá»‡u quáº£.</p>
            
            <div style="margin-top:16px;padding:12px;background:rgba(255,106,0,0.1);border-left:4px solid var(--orange);border-radius:8px">
              <strong>ğŸ¯ Má»¥c tiÃªu:</strong> TÄƒng cÆ°á»ng quáº£n lÃ½ cháº¥t lÆ°á»£ng, giáº£m thiá»ƒu sai sÃ³t, vÃ  nÃ¢ng cao hiá»‡u suáº¥t lÃ m viá»‡c cá»§a Ä‘á»™i ngÅ© SPX Express TVH.
            </div>
          </div>

          <div class="section glass" style="margin-bottom:20px">
            <h3>âœ¨ TÃ­nh NÄƒng ChÃ­nh</h3>
            <ul style="line-height:1.8">
              <li><strong>ğŸ“‹ Quáº£n LÃ½ Checklist:</strong> Táº¡o vÃ  theo dÃµi tasks hÃ ng ngÃ y theo tá»«ng Hub</li>
              <li><strong>â° SLA Tracking:</strong> GiÃ¡m sÃ¡t thá»i gian hoÃ n thÃ nh cÃ´ng viá»‡c, cáº£nh bÃ¡o trá»… háº¡n</li>
              <li><strong>ğŸ“Š BÃ¡o CÃ¡o & Analytics:</strong> Thá»‘ng kÃª hiá»‡u suáº¥t, xuáº¥t Excel/PDF</li>
              <li><strong>ğŸ” Audit Log:</strong> Theo dÃµi lá»‹ch sá»­ truy cáº­p vÃ  thao tÃ¡c</li>
              <li><strong>ğŸ‘¥ Quáº£n LÃ½ Users:</strong> PhÃ¢n quyá»n theo Hub vÃ  Role (Admin/User)</li>
              <li><strong>ğŸ“ Ghi ChÃº:</strong> LÆ°u trá»¯ ghi chÃº quan trá»ng theo ngÃ y</li>
              <li><strong>ğŸ“… Google Calendar Sync:</strong> Äá»“ng bá»™ SLA vá»›i Google Calendar</li>
              <li><strong>ğŸ”’ Báº£o Máº­t:</strong> XÃ¡c thá»±c Google Account ná»™i bá»™, phÃ¢n quyá»n Hub-based</li>
            </ul>
          </div>

          <div class="section glass" style="margin-bottom:20px">
            <h3>ğŸ“š HÆ°á»›ng Dáº«n Sá»­ Dá»¥ng</h3>
            
            <h4>1ï¸âƒ£ ÄÄƒng Nháº­p</h4>
            <p>Sá»­ dá»¥ng Google Account ná»™i bá»™ SPX Ä‘á»ƒ Ä‘Äƒng nháº­p. Chá»‰ nhá»¯ng account Ä‘Æ°á»£c Admin thÃªm vÃ o há»‡ thá»‘ng má»›i cÃ³ quyá»n truy cáº­p.</p>
            
            <h4>2ï¸âƒ£ Checklist HÃ ng NgÃ y</h4>
            <ol style="line-height:1.8">
              <li>Chá»n <strong>Hub</strong> vÃ  <strong>NgÃ y</strong> cáº§n xem</li>
              <li>Há»‡ thá»‘ng tá»± Ä‘á»™ng load danh sÃ¡ch tasks tá»« template</li>
              <li>TÃ­ch âœ… vÃ o checkbox khi hoÃ n thÃ nh task</li>
              <li>Click <strong>ğŸ’¾ LÆ°u</strong> Ä‘á»ƒ save tiáº¿n Ä‘á»™</li>
              <li>Tasks cÃ³ SLA sáº½ tá»± Ä‘á»™ng Ä‘á»“ng bá»™ lÃªn Google Calendar</li>
            </ol>
            
            <h4>3ï¸âƒ£ Xem BÃ¡o CÃ¡o</h4>
            <ol style="line-height:1.8">
              <li>Chuyá»ƒn sang tab <strong>ğŸ“Š BÃ¡o CÃ¡o</strong></li>
              <li>Chá»n Hub vÃ  khoáº£ng thá»i gian</li>
              <li>Xem thá»‘ng kÃª: completion rate, SLA performance, category breakdown</li>
              <li>Xuáº¥t ra Excel hoáº·c PDF náº¿u cáº§n</li>
            </ol>
            
            <h4>4ï¸âƒ£ Admin Functions (DÃ nh cho Admin)</h4>
            <ol style="line-height:1.8">
              <li>Tab <strong>âš™ï¸ Admin</strong> chá»‰ hiá»‡n vá»›i users cÃ³ role "admin"</li>
              <li>ThÃªm/sá»­a/xÃ³a users vÃ  phÃ¢n quyá»n Hub</li>
              <li>Quáº£n lÃ½ template tasks cho tá»«ng Hub</li>
            </ol>
          </div>

          <div class="section glass" style="margin-bottom:20px">
            <h3>ğŸ’¡ Tips & Tricks</h3>
            <ul style="line-height:1.8">
              <li>Sá»­ dá»¥ng <strong>TÃ¬m kiáº¿m</strong> Ä‘á»ƒ nhanh chÃ³ng tÃ¬m tasks cáº§n lÃ m</li>
              <li>Lá»c theo <strong>NhÃ³m</strong> (Äáº§u Ca, Trong Ca, Cuá»‘i Ca) Ä‘á»ƒ táº­p trung cÃ´ng viá»‡c</li>
              <li>Check <strong>ğŸ” Truy Cáº­p</strong> Ä‘á»ƒ xem lá»‹ch sá»­ thao tÃ¡c cá»§a báº¡n</li>
              <li>Theme tá»‘i/sÃ¡ng: Click nÃºt <strong>ğŸŒ“</strong> á»Ÿ gÃ³c pháº£i</li>
              <li>Äá»•i ngÃ´n ngá»¯: Click <strong>VI/EN</strong> Ä‘á»ƒ chuyá»ƒn tiáº¿ng Viá»‡t/Anh</li>
            </ul>
          </div>

          <div class="section glass" style="text-align:center;background:linear-gradient(135deg,rgba(255,106,0,0.1),rgba(255,179,0,0.1));padding:30px">
            <h3 style="color:var(--orange)">ğŸ™ Lá»i Cáº£m Æ n</h3>
            <p style="font-size:16px;margin:16px 0">Cáº£m Æ¡n toÃ n thá»ƒ Ä‘á»™i ngÅ© <strong>SPX Express TVH</strong> Ä‘Ã£ tin tÆ°á»Ÿng vÃ  sá»­ dá»¥ng há»‡ thá»‘ng.</p>
            <p>Má»i gÃ³p Ã½ vÃ  Ä‘á» xuáº¥t cáº£i tiáº¿n, vui lÃ²ng liÃªn há»‡ IT Department.</p>
            <div style="margin-top:24px;font-size:14px;color:var(--muted)">
              <p><strong>SPX Express TVH</strong> Â© 2025</p>
              <p>Daily Checklist Management System - PhiÃªn Báº£n CHÃNH THá»¨C v2.5 </p>
              <p style="margin-top:8px">Developed with â¤ï¸ for SPX Express TVH Team</p>
            </div>
          </div>
        </div>

      </div>
    </main>
  </div>

  <!-- TOAST CONTAINER -->
  <div id="toast" style="position:fixed;right:14px;bottom:14px;z-index:9999;display:flex;flex-direction:column;align-items:flex-end"></div>

  <!-- Load modules in order: config â†’ utils â†’ error-handler â†’ cache-manager â†’ script -->
  <?!= include('config'); ?>
  <?!= include('utils'); ?>
  <?!= include('error-handler'); ?>
  <?!= include('cache-manager'); ?>
  <?!= include('script'); ?>
  
  <!-- Floating Chat Button (Modern Trend Style) -->
  <div id="floatingChatButton" style="position:fixed;bottom:24px;right:24px;z-index:9998;cursor:pointer;transition:all 0.3s cubic-bezier(0.4, 0, 0.2, 1)">
    <div style="width:60px;height:60px;border-radius:50%;background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);box-shadow:0 8px 24px rgba(102,126,234,0.4);display:flex;align-items:center;justify-content:center;font-size:28px;color:#fff;position:relative">
      <span id="chatIcon">ğŸ’¬</span>
      <span id="chatBadge" style="position:absolute;top:-4px;right:-4px;width:20px;height:20px;background:#ef4444;border-radius:50%;display:none;align-items:center;justify-content:center;font-size:11px;font-weight:700;color:#fff;border:2px solid #fff">0</span>
    </div>
  </div>
  
  <!-- Chat Widget (Hidden by default) -->
  <div id="chatWidget" style="position:fixed;bottom:100px;right:24px;width:380px;max-width:calc(100vw - 48px);height:500px;max-height:calc(100vh - 140px);background:var(--glass-strong);border:1px solid var(--stroke);border-radius:20px;box-shadow:0 20px 60px rgba(0,0,0,0.3);display:none;flex-direction:column;z-index:9999;overflow:hidden;backdrop-filter:blur(20px)">
    <div style="padding:16px 20px;border-bottom:1px solid var(--stroke);display:flex;justify-content:space-between;align-items:center;background:linear-gradient(135deg, rgba(102,126,234,0.1) 0%, rgba(118,75,162,0.1) 100%)">
      <div style="display:flex;align-items:center;gap:12px">
        <div style="width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg, #667eea 0%, #764ba2 100%);display:flex;align-items:center;justify-content:center;font-size:20px">ğŸ’¬</div>
        <div>
          <div style="font-weight:600;font-size:15px;color:var(--ink)">Chat Ná»™i Bá»™</div>
          <div id="chatWidgetOnline" style="font-size:11px;color:var(--muted);display:flex;align-items:center;gap:4px">
            <span style="width:6px;height:6px;background:#10b981;border-radius:50%"></span>
            <span id="chatWidgetOnlineCount">0</span> online
          </div>
        </div>
      </div>
      <button id="chatWidgetClose" style="width:32px;height:32px;border-radius:50%;background:rgba(0,0,0,0.05);border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:18px;color:var(--muted);transition:all 0.2s" title="ÄÃ³ng">âœ•</button>
    </div>
    
    <div id="chatWidgetMessages" class="scrollbox" style="flex:1;padding:16px;overflow-y:auto;background:rgba(0,0,0,0.02)"></div>
    
    <div style="padding:16px;border-top:1px solid var(--stroke);background:rgba(0,0,0,0.02)">
      <div style="display:flex;gap:8px">
        <input id="chatWidgetInput" type="text" placeholder="Nháº­p tin nháº¯n..." class="control" style="flex:1;padding:10px 16px;font-size:14px" />
        <button id="chatWidgetSend" class="btn btn-primary" style="padding:10px 20px;min-width:auto">ğŸ“¤</button>
      </div>
      <div id="chatWidgetOnlineUsers" style="margin-top:12px;padding-top:12px;border-top:1px solid var(--stroke);display:flex;gap:6px;flex-wrap:wrap"></div>
    </div>
  </div>
</body>
</html>
